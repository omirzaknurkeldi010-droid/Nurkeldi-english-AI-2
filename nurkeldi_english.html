<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nurkeldi English AI</title>
    <style>
        /* –¢–≤–æ–∏ —Å—Ç–∏–ª–∏ —è –æ—Å—Ç–∞–≤–∏–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
        body { font-family: "Segoe UI", Arial, sans-serif; background: linear-gradient(135deg, #eef2ff, #f8fafc); padding: 30px; }
        .banner { background: white; border-radius: 14px; padding: 14px 20px; max-width: 760px; margin: 0 auto 22px; display: flex; align-items: center; gap: 14px; box-shadow: 0 10px 30px rgba(0,0,0,0.12); }
        .banner img { height: 42px; }
        .banner span { font-size: 14px; color: #475569; }
        .box { background: white; max-width: 760px; margin: auto; padding: 30px; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.18); }
        .header { display: flex; align-items: center; gap: 18px; margin-bottom: 14px; }
        .header img { width: 110px; height: 110px; border-radius: 50%; object-fit: cover; border: 4px solid #e5e7eb; }
        .header h2 { margin: 0; font-size: 24px; }
        .header p { margin: 6px 0 0; color: #64748b; }
        textarea { width: 100%; height: 150px; padding: 14px; font-size: 15px; border-radius: 14px; border: 1px solid #c7d2fe; outline: none; resize: none; }
        textarea:focus { border-color: #6366f1; box-shadow: 0 0 0 3px rgba(99,102,241,0.25); }
        button { width: 100%; margin-top: 16px; padding: 14px; font-size: 16px; font-weight: 600; border-radius: 16px; border: none; cursor: pointer; color: white; background: linear-gradient(135deg, #6366f1, #4338ca); box-shadow: 0 14px 30px rgba(67,56,202,0.45); transition: transform 0.15s ease, box-shadow 0.15s ease; }
        button:hover { transform: translateY(-2px); box-shadow: 0 20px 40px rgba(67,56,202,0.6); }
        #result { margin-top: 18px; background: #eef2ff; padding: 16px; border-radius: 14px; white-space: pre-wrap; font-size: 14px; line-height: 1.5; display: none; animation: fadeIn 0.4s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .footer { margin-top: 14px; font-size: 12px; color: #64748b; text-align: center; }
    </style>
</head>
<body>

<div class="banner">
    <img src="alt-logo.png">
    <span>Sponsored by <strong>ALT University</strong></span>
</div>

<div class="box">
    <div class="header">
        <img src="avatar2.png">
        <div>
            <h2>Hi! My name is Nurkeldi üëã</h2>
            <p>Write a short English text. I will determine your English level.</p>
        </div>
    </div>

    <textarea id="text" placeholder="Write your English text here..."></textarea>
    <button onclick="analyze()">Analyze</button>
    <div id="result"></div>
    <div class="footer">English Level Assessment AI ¬∑ CEFR (A1‚ÄìC1)</div>
</div>

<script src="config.js"></script>

<script>
async function analyze() {
    const text = document.getElementById("text").value.trim();
    const result = document.getElementById("result");

    if (!text) {
        result.style.display = "block";
        result.innerText = "‚ö†Ô∏è Please write some text first.";
        return;
    }

    // –ü–†–û–í–ï–†–ö–ê –ö–õ–Æ–ß–ê
    if (typeof CONFIG === 'undefined' || !CONFIG.API_KEY) {
        result.style.display = "block";
        result.innerText = "‚ùå –û—à–∏–±–∫–∞: –§–∞–π–ª config.js –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –∫–ª—é—á –Ω–µ —É–∫–∞–∑–∞–Ω.";
        return;
    }

    result.style.display = "block";
    result.innerText = "Analyzing with AI";

    let dots = 0;
    const loader = setInterval(() => {
        dots = (dots + 1) % 4;
        result.innerText = "Analyzing with AI" + ".".repeat(dots);
    }, 400);

    try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer " + CONFIG.API_KEY // –ö–õ–Æ–ß –¢–ï–ü–ï–†–¨ –ë–ï–†–ï–¢–°–Ø –û–¢–°–Æ–î–ê
            },
            body: JSON.stringify({
                model: "gpt-3.5-turbo",
                temperature: 0.2,
                messages: [
                    { role: "system", content: "You are an English level assessment AI. Determine CEFR level (A1‚ÄìC1) and give advice." },
                    { role: "user", content: text }
                ]
            })
        });

        const data = await response.json();
        clearInterval(loader);

        if (data.error) {
            result.innerText = "‚ùå API Error: " + data.error.message;
        } else {
            result.innerText = `${data.choices[0].message.content}\n\nRecommended learning resources:\n‚Ä¢ https://www.youtube.com/@englishplaylists/videos\n‚Ä¢ https://www.youtube.com/@povest-ilovepovest8410`;
        }

    } catch (e) {
        clearInterval(loader);
        result.innerText = "‚ùå AI is temporarily unavailable.";
    }
}
</script>
</body>
</html>